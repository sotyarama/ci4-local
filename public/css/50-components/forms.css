/* ===================================================================
   LAYER: Component
   FILE : public/css/50-components/forms.css
   SCOPE: Form components (controls, labels, helper text, money input)
   NOTES:
   - PRIMARY API : .tr-control, .tr-form-label, .tr-field, .tr-help, .tr-money*
   - LEGACY ALIAS: .input/.select/.textarea, .form-* (temporary)
   - Avoid conflict with typography utility class: .tr-label (baseline)
   =================================================================== */

/* =========================================================
   Form label & helper
   ========================================================= */
.tr-form-label,
.form-label {
    display: block;
    margin: 0 0 6px;
    font-size: var(--tr-fs-xs);
    line-height: 1.2;
    color: var(--tr-text-muted);
    font-weight: var(--tr-fw-medium);
}

.tr-help,
.form-hint {
    margin-top: 6px;
    font-size: var(--tr-fs-xs);
    color: var(--tr-text-muted);
}

.tr-help.is-error,
.form-error {
    margin-top: 6px;
    font-size: var(--tr-fs-xs);
    color: var(--tr-danger);
}

/* Optional wrapper */
.tr-field {
    margin: 0 0 12px;
}

/* =========================================================
   Control base
   ========================================================= */
.tr-control,
.input,
.select,
.textarea {
    --ctl-h: 38px;

    display: block;
    width: 100%;
    box-sizing: border-box;
    height: var(--ctl-h);
    padding: 8px 10px;
    font-family: inherit;
    font-size: var(--tr-fs-md);
    line-height: 1.2;
    color: var(--tr-text);
    background: var(--tr-surface);
    border: 1px solid var(--tr-border);
    border-radius: 12px;
    transition: box-shadow 0.12s ease, border-color 0.12s ease, background-color 0.12s ease;
}

/* textarea */
textarea.tr-control,
.textarea {
    height: auto;
    min-height: 96px;
    resize: vertical;
    padding: 10px;
}

/* select */
select.tr-control,
.select {
    padding-right: 34px;
}

/* Number input: normalize spin buttons */
input[type='number'].tr-control {
    appearance: textfield;
}

input[type='number'].tr-control::-webkit-outer-spin-button,
input[type='number'].tr-control::-webkit-inner-spin-button {
    appearance: none;
    margin: 0;
}

/* Focus */
.tr-control:focus,
.input:focus,
.select:focus,
.textarea:focus {
    outline: none;
}

.tr-control:focus-visible,
.input:focus,
.select:focus,
.textarea:focus {
    border-color: var(--accent-primary);
    box-shadow: 0 0 0 3px rgb(37 99 235 / 18%);
}

/* Placeholder */
.tr-control::placeholder,
.input::placeholder,
.textarea::placeholder {
    color: var(--tr-text-muted);
    opacity: 0.9;
}

/* Disabled */
.tr-control:disabled,
.input:disabled,
.select:disabled,
.textarea:disabled {
    background: #eef2f7;
    color: rgb(17 17 17 / 65%);
    cursor: not-allowed;
    opacity: 0.85;
}

/* Readonly */
.tr-control[readonly] {
    background: #eef2f7;
}

.tr-money .tr-control {
    border-radius: 0 12px 12px 0;
    border: 0;
    height: 100%;
}

/* Error state */
.tr-control.is-error,
.tr-field.is-error .tr-control,
.is-invalid {
    border-color: var(--tr-danger) !important;
    box-shadow: 0 0 0 3px rgb(220 38 38 / 14%) !important;
}

/* =========================================================
   Money Input Pattern (Rp prefix)
   ========================================================= */
.tr-money,
.pos-money {
    display: flex;
    align-items: stretch;
    gap: 0;
    border: 1px solid var(--tr-border);
    border-radius: 12px;
    background: var(--tr-surface);
    overflow: hidden;
}

.tr-money-prefix,
.pos-money-prefix {
    padding: 0 10px;
    min-width: 44px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: var(--tr-fs-xs);
    font-weight: 700;
    color: var(--tr-text-muted);
    background: #f7f7f8;
    border-right: 1px solid var(--tr-border);
    box-sizing: border-box;
    line-height: 38px;
}


/* Legacy input alias (kept during migration) */
.tr-money-input,
.pos-money-input {
    border: none !important;
    border-radius: 0 !important;
    height: 100%;
    padding: 0 10px;
    background: transparent;
    box-sizing: border-box;
    line-height: 38px;
    font-size: var(--tr-fs-xs);
}

/* Focus ring for group */
.tr-money:focus-within,
.pos-money:focus-within {
    border-color: var(--accent-primary);
}

.tr-money:focus-within .tr-control,
.pos-money:focus-within .tr-money-input,
.pos-money:focus-within .pos-money-input {
    outline: none;
}

/* Readonly style for group */
.tr-money.is-readonly .tr-money-prefix,
.pos-money.is-readonly .pos-money-prefix {
    background: #f7f7f8;
}

.tr-money.is-readonly .tr-control {
    background: #eef2f7;
}
