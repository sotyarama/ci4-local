/* =========================================================
   POS Touch (Temu Rasa)
   Scope: .tr-touch, .pos-touch
   Stage: B1.12 (Typography + layout + modal polish + scroll system)
   ========================================================= */

/* =========================================================
   0) Base + Controls
   ========================================================= */

.pos-touch {
    font-size: 14px;
    line-height: 1.35;
}

/* NOTE: textarea and number-input resets are provided by global ui/forms.css */

/* =========================================================
   1) Page Layout (POS inside .content)
   ========================================================= */

/* Stop outer scroll only when POS page exists (Chrome/Edge) */
.content:has(.tr-touch, .pos-touch) {
    overflow: hidden;
}

.content:has(.tr-touch, .pos-touch) .pos-touch {
    height: 100%;
}

/* Sticky can fail if parent has overflow hidden */
.tr-touch,
.pos-touch .card {
    overflow: visible;
}

/* Card becomes layout container */
.tr-touch,
.pos-touch .tr-card,
.pos-card {
    padding: 14px;
    height: 100%;
    display: flex;
    flex-direction: column;
    min-height: 0;
}

/* Main grid fills remaining space */
.tr-touch,
.pos-touch .tr-grid,
.pos-grid {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 14px;
    flex: 1;
    min-height: 0;
}

/* Left & right columns allow internal scroll */
.tr-touch,
.pos-touch .tr-menu-list,
.pos-menu-list,
.pos-touch .tr-side,
.pos-side {
    min-height: 0;
}

/* Left: menu scroll lives here */
.tr-touch,
.pos-touch .tr-menu-list,
.pos-menu-list {
    max-height: 70vh; /* keep existing feel */
    overflow: auto;
    padding-right: 6px;
}

/* =========================================================
   4) Right Panel (Cart + Totals + Payment)
   ========================================================= */
.tr-touch,
.pos-touch .tr-side,
.pos-side {
    height: 100%;
    border: 1px solid var(--tr-border);
    border-radius: 16px;
    background: var(--tr-surface);
    padding: 12px;
    display: flex;
    flex-direction: column;
    gap: 10px;
    min-height: 0;
}

/* =========================================================
   2) Header + Alert
   ========================================================= */

.tr-touch,
.pos-touch .tr-header,
.pos-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 12px;
    margin-bottom: 12px;
}

/* Sticky header inside card */
.tr-touch,
.pos-touch .tr-header-sticky,
.pos-header-sticky {
    position: sticky;
    top: 0;
    z-index: 50;
    background: var(--tr-surface);
    padding-bottom: 10px;
    border-bottom: 1px solid var(--tr-border);
}

.tr-touch,
.pos-touch .tr-title,
.pos-title {
    margin: 0;
    font-size: 18px;
    line-height: 1.2;
    font-weight: 900;
    letter-spacing: 0.2px;
    color: var(--tr-text);
}

.tr-touch,
.pos-touch .tr-subtitle,
.pos-subtitle {
    margin: 4px 0 0;
    font-size: 12px;
    line-height: 1.3;
    color: var(--tr-muted-text);
}

/* Date pill */

/* Date pill moved to public/css/ui/badges.css (.tr-pill / .pos-pill) */

/* Alert */

/* Inline alert moved to public/css/ui/alerts.css (.tr-alert / .pos-alert) */

/* small screen header stack */
@media (width <= 720px) {
    .tr-touch,
    .pos-touch .tr-header,
    .pos-header {
        flex-direction: column;
        align-items: stretch;
    }
}

/* =========================================================
   3) Menu Category (details/summary) + Menu Cards
   ========================================================= */

.tr-touch,
.pos-touch #menu-list details {
    margin-bottom: 12px !important;
    border: 1px solid var(--tr-border) !important;
    border-radius: 16px !important;
    padding: 10px !important;
    background: #fff !important;
}

.tr-touch,
.pos-touch #menu-list details > summary {
    list-style: none;
    cursor: pointer;
    user-select: none;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px;
    border-radius: 12px;
    font-weight: 900;
    font-size: 13px;
    line-height: 1.2;
    color: var(--tr-text);
    background: rgb(0 0 0 / 2%);
    border: 1px solid rgb(0 0 0 / 3%);
}

.tr-touch,
.pos-touch #menu-list details > summary::-webkit-details-marker {
    display: none;
}

.tr-touch,
.pos-touch #menu-list details > summary:hover {
    border-color: rgb(37 99 235 / 35%);
    background: rgb(37 99 235 / 6%);
}

.tr-touch,
.pos-touch #menu-list details[open] > summary {
    background: rgb(37 99 235 / 6%);
    border-color: rgb(37 99 235 / 30%);
}

.tr-touch,
.pos-touch #options-modal > div {
    background: #fff;
    border: 1px solid var(--tr-border);
    border-radius: 16px;
    box-shadow: 0 14px 30px rgb(0 0 0 / 18%);
}

.tr-touch,
.pos-touch #menu-list .menu-toggle-symbol {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 28px;
    height: 28px;
    border-radius: 10px;
    border: 1px solid var(--tr-border);
    background: #fff;
    font-size: 16px !important;
    font-weight: 900;
    color: var(--tr-muted-text) !important;
}

.tr-touch,
.pos-touch #options-body > div {
    border-radius: 14px !important;
    padding: 12px !important;
    background: var(--tr-surface);
}

/* grid of menu cards */
.tr-touch,
.pos-touch #menu-list details > div {
    margin-top: 12px !important;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)) !important;
    gap: 6px;
}


/* menu card */

/* Menu-card styles moved to public/css/ui/cards.css (.tr-menu-card, .pos-menu-card / .tr-card-menu) */

@media (width <= 980px) {
    .tr-touch,
    .pos-touch #menu-list details {
        padding: 8px !important;
    }

    .tr-touch,
    .pos-touch #menu-list details > summary {
        padding: 9px;
    }

    .tr-touch,
    .pos-touch #menu-list details > div {
        gap: 10px !important;
        grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)) !important;
    }

    .tr-touch,
    .pos-touch .tr-menu-card,
    .pos-menu-card {
        min-height: 68px;
        padding: 10px;
    }
}


/* top section */
.tr-touch,
.pos-touch .tr-side-top,
.pos-side-top {
    display: grid;
    gap: 10px;
}

/* customer row */
.tr-touch,
.pos-touch .tr-customer-row,
.pos-customer-row {
    display: flex;
    gap: 8px;
    align-items: center;
}

/* cart head */
.tr-touch,
.pos-touch .tr-cart-head,
.pos-cart-head {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 10px;
}

.tr-touch,
.pos-touch .tr-section-title,
.pos-section-title {
    font-weight: 900;
    font-size: 14px;
    line-height: 1.2;
    color: var(--tr-text);
}

.tr-touch,
.pos-touch .tr-section-hint,
.pos-section-hint {
    margin-top: 3px;
    font-size: 12px;
    line-height: 1.3;
    color: var(--tr-muted-text);
}

/* cart list scroll */
.tr-touch,
.pos-touch .tr-cart-list,
.pos-cart-list {
    flex: 1;
    min-height: 0;
    overflow: auto;
    border: 1px dashed var(--tr-border);
    border-radius: 12px;
    padding: 12px; /* optional: spacing dalam */
    background: #fff;
    height: 100%;
}

.tr-touch,
.pos-touch .tr-empty,
.pos-empty {
    text-align: center;
    color: var(--tr-muted-text);
    font-size: 12px;
    padding: 12px 6px;
}

/* sticky bottom */
.tr-touch,
.pos-touch .tr-side-bottom,
.pos-side-bottom {
    position: sticky;
    bottom: 0;
    background: var(--tr-surface);
    border-top: 1px solid var(--tr-border);
    padding-top: 10px;
    display: grid;
    gap: 10px;
}

/* totals */
.tr-touch,
.pos-touch .tr-totals,
.pos-totals {
    display: grid;
    gap: 6px;
}

.tr-touch,
.pos-touch .tr-row,
.pos-row {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    font-size: 13px;
    line-height: 1.2;
    color: var(--tr-text);
}

.tr-touch,
.pos-touch .tr-row-strong,
.pos-row-strong {
    font-weight: 900;
    font-size: 14px;
}

/* actions */

/* Button helpers moved to public/css/ui/buttons.css (.tr-actions, .pos-actions, .tr-icon-btn, .pos-icon-btn, .tr-small-btn, .pos-small-btn, .tr-save-btn, .pos-save-btn) */

/* =========================================================
   5) Cart Items (rendered by JS)
   ========================================================= */

.tr-touch,
.pos-touch .tr-cart-item,
.pos-cart-item {
    display: grid;
    grid-template-columns: 1fr auto;
    align-items: start;
    gap: 10px;
    padding: 10px 8px;
    border-bottom: 1px solid var(--tr-border);
}

.tr-touch,
.pos-touch .tr-cart-item,
.pos-cart-item:last-child {
    border-bottom: none;
}

.tr-touch,
.pos-touch .tr-cart-item,
.pos-cart-item.is-even {
    background: rgb(0 0 0 / 1.5%);
}

.tr-touch,
.pos-touch .tr-cart-left,
.pos-cart-left {
    min-width: 0;
}

.tr-touch,
.pos-touch .tr-cart-name,
.pos-cart-name {
    font-weight: 900;
    font-size: 13px;
    line-height: 1.2;
    color: var(--tr-text);
}

.tr-touch,
.pos-touch .tr-cart-price,
.pos-cart-price {
    margin-top: 3px;
    font-size: 11px;
    line-height: 1.2;
    font-weight: 600;
    color: var(--tr-muted-text);
}

.tr-touch,
.pos-touch .tr-cart-meta,
.pos-cart-meta {
    margin-top: 3px;
    font-size: 11px;
    line-height: 1.25;
    color: var(--tr-muted-text);
}

.tr-touch,
.pos-touch .tr-cart-note,
.pos-cart-note {
    margin-top: 8px;
}

.tr-touch,
.pos-touch .tr-cart-note-label,
.pos-cart-note-label {
    font-size: 11px;
    line-height: 1.2;
    color: var(--tr-muted-text);
}

.tr-touch,
.pos-touch .tr-cart-note,
.pos-cart-note textarea {
    width: 100%;
    margin-top: 6px;
    padding: 8px 10px;
    font-size: 12px;
    line-height: 1.25;
    border: 1px solid var(--tr-border);
    border-radius: 12px;
    background: #fff;
    resize: vertical;
    min-height: 56px;
}

/* qty controls */
.tr-touch,
.pos-touch .tr-cart-right,
.pos-cart-right {
    display: flex;
    align-items: center;
    gap: 8px;
    white-space: nowrap;
    padding-top: 2px;
}

.tr-touch,
.pos-touch .tr-qty,
.pos-qty {
    min-width: 28px;
    text-align: center;
    font-weight: 900;
    font-size: 13px;
    line-height: 1;
    color: var(--tr-text);
}

.tr-touch,
.pos-touch .tr-mini-btn,
.pos-mini-btn {
    width: 30px;
    height: 30px;
    border-radius: 10px;
    border: 1px solid var(--tr-border);
    background: #fff;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    line-height: 1;
}

.tr-touch,
.pos-touch .tr-mini-btn,
.pos-mini-btn:hover {
    border-color: rgb(37 99 235 / 35%);
}

.tr-touch,
.pos-touch .tr-mini-btn,
.pos-mini-btn.is-danger {
    color: var(--tr-accent-brown);
}

/* =========================================================
   6) Payment Area (Cash vs QRIS)
   ========================================================= */

.tr-touch,
.pos-touch .tr-pay,
.pos-pay {
    margin-top: 12px;
    display: grid;
    gap: 12px;
}

.tr-touch,
.pos-touch .tr-pay-method,
.pos-pay-method {
    display: grid;
    gap: 6px;
}

.tr-touch,
.pos-touch .tr-pay-hint,
.pos-pay-hint {
    font-size: 11px;
    line-height: 1.3;
    color: var(--tr-muted-text);
    margin-top: 6px;
}

.tr-touch,
.pos-touch .tr-pay,
.pos-pay.is-qris .tr-pay-hint,
.pos-pay-hint {
    color: var(--tr-primary);
}

.tr-touch,
.pos-touch .tr-pay-amounts,
.pos-pay-amounts {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
    align-items: start;
}


/* money input group — rely on global ui/forms.css (.tr-money / .pos-money) for base styles */

.tr-touch,
.pos-touch .tr-money-prefix,
.pos-money-prefix {
    /* Use global money prefix spacing (no page nudge) */
    padding: 0 10px;
    display: inline-flex;
    align-items: center;
    min-width: 44px;
    box-sizing: border-box;
}

.tr-touch,
.pos-touch .tr-money-input,
.pos-money-input {
    /* Use global money input spacing (no nudge/translate) */
    padding: 0 10px;
    transform: none;
}

.tr-touch,
.pos-touch .tr-money,
.pos-money:focus-within {
    outline: 2px solid rgb(31 95 255 / 20%);
    border-color: rgb(31 95 255 / 45%);
}

.tr-touch,
.pos-touch .tr-money,
.pos-money.is-readonly {
    background: rgb(0 0 0 / 2%);
}

.tr-touch,
.pos-touch .tr-money,
.pos-money.is-readonly .tr-money-prefix,
.pos-money-prefix {
    background: rgb(37 99 235 / 6%);
    color: var(--tr-primary);
}

.tr-touch,
.pos-touch .tr-money,
.pos-money.is-readonly .tr-money-input,
.pos-money-input {
    cursor: not-allowed;
}

.tr-touch,
.pos-touch .tr-pay,
.pos-pay:not(.is-qris) #money-paid:focus-within {
    outline: 2px solid rgb(31 95 255 / 22%);
    border-color: rgb(31 95 255 / 55%);
}

@media (width <= 980px) {
    .tr-touch,
    .pos-touch .tr-pay-amounts,
    .pos-pay-amounts {
        grid-template-columns: 1fr;
    }
}

/* =========================================================
   7) Options Modal (Scoped)
   ========================================================= */

.tr-touch,
.pos-touch #options-modal {
    padding: 18px;
}


.tr-touch,
.pos-touch #options-title {
    font-size: 16px;
    font-weight: 800;
    line-height: 1.25;
}

.tr-touch,
.pos-touch #options-modal [id='options-close'] {
    width: 34px;
    height: 34px;
    border-radius: 10px;
    border: 1px solid var(--tr-border);
    background: #fff;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

.tr-touch,
.pos-touch #options-modal [id='options-close']:hover {
    background: rgb(0 0 0 / 2%);
}

.tr-touch,
.pos-touch #options-body {
    gap: 12px;
}


.tr-touch,
.pos-touch #options-body > div > div:first-child {
    font-size: 13px !important;
    font-weight: 800 !important;
    line-height: 1.25;
}

.tr-touch,
.pos-touch #options-body > div > div:nth-child(2) {
    white-space: pre-line;
    font-size: 11px;
    color: var(--tr-muted-text);
    margin-top: 2px;
}

.tr-touch,
.pos-touch #options-body > div > div:nth-child(3) {
    margin-top: 10px !important;
    gap: 8px !important;
}

.tr-touch,
.pos-touch #options-body > div > div:nth-child(3) > div {
    border-radius: 12px !important;
    padding: 10px !important;
    background: #fff;
    transition: background 120ms ease, border-color 120ms ease;
}

.tr-touch,
.pos-touch #options-body > div > div:nth-child(3) > div:hover {
    background: rgb(122 154 108 / 6%);
    border-color: rgb(122 154 108 / 35%);
}

.tr-touch,
.pos-touch #options-body input[type='checkbox'] {
    width: 16px;
    height: 16px;
    accent-color: var(--tr-primary);
}

.tr-touch,
.pos-touch #options-body input[type='checkbox'] + span {
    font-size: 13px;
    line-height: 1.25;
    color: var(--tr-text);
}

.tr-touch,
.pos-touch #options-body > div > div:nth-child(3) > div > div:last-child {
    font-size: 12px !important;
    color: var(--tr-muted-text) !important;
    line-height: 1.2;
    white-space: nowrap;
}

.tr-touch,
.pos-touch #options-body > div > div:nth-child(3) > div:has(input[type='checkbox']:checked) {
    background: rgb(122 154 108 / 10%);
    border-color: rgb(122 154 108 / 45%);
}

.tr-touch,
.pos-touch #options-total {
    font-weight: 900;
    font-size: 14px;
}

.tr-touch,
.pos-touch #options-error {
    border-radius: 12px;
}

.tr-touch,
.pos-touch #options-modal .btn {
    border-radius: 12px !important;
    padding: 10px 12px !important;
}

/* Modal and list styles moved to public/css/ui/modal.css */

.tr-touch,
.pos-touch .tr-cart-card,
.pos-cart-card {
    display: flex;
    flex-direction: column;
    min-height: 0;
}

.tr-touch,
.pos-touch .tr-cart-body,
.pos-cart-body {
    flex: 1;
    min-height: 0;
    padding: 0; /* biar pos-cart-list yang atur */
    overflow: hidden; /* jaga border card */
}


/* Footer stays at bottom naturally */
.tr-touch,
.pos-touch .tr-cart-footer,
.pos-cart-footer {
    flex: 0 0 auto;
}

.tr-touch,
.pos-touch .tr-actions,
.pos-actions {
    margin-top: 10px;
    padding-top: 10px;
    border-top: 1px solid var(--tr-border);
}

/* Bridge: pos-money -> tr-money */

/* Minimal page-specific overrides — rely on global ui/forms.css (.tr-money, .tr-control) */
.tr-touch,
.pos-touch #pos-pay .pos-money {
    height: 38px;
    align-items: center;
}

.tr-touch,
.pos-touch #pos-pay .tr-money,
.pos-money .tr-control {
    height: 100%;
    padding-top: 8px; /* preserve comfortable vertical padding */
    padding-bottom: 8px;
}
